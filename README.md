# 巴西电商数据分析项目报告

## 📅 项目进度追踪
- [x] **专题一：漏斗分析与转化统计** (完成日期: 2026-01-14)
- [x] **专题二：物流时效与用户满意度相关性分析** (完成日期: 2026-01-15)
- [x] **专题三：产品类别与区域市场画像** (完成日期: 2026-01-16)

---

## 📊专题一：漏斗分析与转化统计 (Funnel Analysis)

### 1. 业务背景与目标
本专题通过分析 Olist 电商平台的订单流向，旨在识别用户流失节点，并探究支付方式（尤其是分期付款）对成交转化的驱动作用。

### 2. 核心分析结论

#### 🟢 订单生命周期漏斗 (Lifecycle Funnel)
* **路径表现**：从下单到送达的整体链路完整，大部分订单集中在 `delivered` 状态。
* **风险点**：漏斗图显示，需重点关注 `processing` 到 `shipped` 的耗时，这是影响用户收货预期的关键转折点。

#### 💳 支付方式转化画像 (Payment Methods)
* **信用卡 (Credit Card)**：平台的核心增长点。不仅订单量最大，其客单价 (AOV) 也远高于其他支付方式。
* **Boleto (银行汇票)**：作为低门槛支付工具，贡献了稳定的基础订单流，但客单价较低。

#### 📈 分期付款的杠杆效应 (Installment Analysis)
* **正向拉动**：箱线图显示，分期期数与支付金额呈现显著正相关。分期越长，用户购买高价值商品的意愿越强。
* **关键结论**：**8期及10期**是高客单价订单的密集区间。
* **业务建议**：对于高价品类，应优先展示“支持10期分期”的促销标签，以降低转化门槛。

### 3. 技术栈实现
* **数据提取**：使用 SQL (DBeaver) 进行多表关联及字段聚合。
* **可视化**：利用 Python (Matplotlib/Pandas) 绘制漏斗条形图及金额分布箱线图。
* **版本控制**：通过 Git 进行本地脚本同步及远程 GitHub 仓库托管。

# 📊 专题二总结：物流时效与用户满意度相关性分析

## 1. 核心业务洞察 (Business Insights)
通过对 **96,478** 笔已送达订单的深度分析，我们得出以下结论：

* **物流是好评的基石**：物流时长与用户评分呈现显著的**负相关性**。
    * **5分订单**：平均物流耗时仅 **10.7天**。
    * **1分订单**：平均物流耗时激增至 **21.3天**，耗时翻倍是导致差评的核心诱因。
* **“超预期”带来的惊喜**：5分用户平均比系统预计时间提前了 **12.7天** 收到货。这种巨大的时间差形成了极佳的用户体感。
* **预期管理失效**：即便是 1 分订单，平均也比预计时间提前了 **3.4天** 送达。这说明用户不仅在乎你是否“准时”，更在乎等待的“绝对时长”。

## 2. 技术实现链路 (Technical Stack)

### 🛠 SQL 数据提取
使用 SQLite 的日期函数进行多表关联聚合，量化核心指标：
* **关键函数**：`JULIANDAY()` 用于计算日期差值。
* **多表关联**：通过 `JOIN` 关联订单表 (`ood`) 与评论表 (`oord`)，并处理了 `ambiguous column` (字段歧义) 问题。
* **聚合逻辑**：使用 `GROUP BY` 按评分维度进行 `AVG()` 平均值计算。

### 🐍 Python 自动化可视化
* **模块化配置**：通过 `config.py` 统一管理数据库连接 (`engine`) 和绘图风格，提升代码复用性。
* **环境排坑**：利用指定系统字体路径 (`C:/Windows/Fonts/msyh.ttc`) 彻底解决了 Matplotlib 在 Windows 环境下的中文乱码问题。
* **双轴图表**：使用 `seaborn` 的柱状图展现绝对耗时，配合 `twinx()` 绘制折线图展现延迟趋势。

## 3. 产出图表解析


* **柱状图 (Bars)**：展示了明显的阶梯式上升，直观体现了“越慢越差评”的业务逻辑。
* **折线图 (Line)**：揭示了预期管理的偏差，提示业务方应优化“预计送达时间”算法。

## 4. 职业分析师建议 (Action Items)
1.  **时效预警**：物流时长超过 **15天** 的订单应触发自动预警，提醒物流服务商介入。
2.  **算法校准**：目前的预计送达时间平均比实际慢 10 天以上，建议收紧预计时间，提供更精准的物流承诺。
3.  **服务补偿**：针对预测耗时较长的偏远地区订单，可主动赠送优惠券以对冲用户的焦虑情绪。
# 📊 专题三总结：地域维度的物流效率分布分析

## 1. 核心业务洞察 (Business Insights)
通过对巴西 27 个州的物流表现进行横向对比，我们发现了明显的“地域鸿沟”：

* **南北效率极度不均**：
    * **物流“黑洞”区**：以 **AP (阿马帕州)** 和 **AM (亚马孙州)** 为代表的北部地区，平均送达时间高达 **26-27 天**。
    * **物流“高效”区**：经济中心 **SP (圣保罗)** 的送达时效通常在 **10 天以内**，区域差值高达 2.5 倍。
* **用户预期的地域性差异**：
    * 尽管北部偏远州（如 AP）物流极慢，但其评价得分（avg_review_score）并未出现崩塌（均在 4 分左右）。
    * **结论**：偏远地区用户对物流已有“长等待”的心理预期。数据发现，系统给这些地区设置的“预计送达时间”极为宽松（平均提前 18-20 天送达），这种**保守的预期管理**反向保护了用户满意度。

## 2. 技术实现链路 (Technical Stack)

### 🛠 SQL 多表下钻
* **三表关联**：通过 `JOIN` 协同 `orders`、`customers` 和 `reviews` 表，将物流表现与地理位置及评分深度绑定。
* **过滤噪声**：使用 `HAVING total_orders > 50` 剔除订单量过小的边缘样本，确保州级平均值的统计学意义。
* **逻辑执行顺序**：明确了 `HAVING` 在 `SELECT` 摆盘之前执行的逻辑，确保了查询效率。

### 🐍 Python 自动化可视化
* **排序可视化**：利用 `sns.barplot` 结合 `ORDER BY avg_delivery_days` 实现时效排行榜，直观定位风险区域。
* **预警色系应用**：使用 `Reds_r` 渐变色系，颜色越深代表物流风险越高。
* **代码规范修复**：遵循 Seaborn 最新标准，通过 `hue` 参数与 `legend=False` 消除版本过时警告，提升了代码的健壮性。

## 3. 职业分析师建议 (Action Items)
1.  **分区域时效承诺**：平台不应采用全国统一的物流预期，而应根据州级别（State-level）的历史数据动态调整 `Estimated Delivery Date`。
2.  **供应链布局参考**：AP、AM 等州虽然订单量占比不高，但极长的链路成本较高。若要深耕北部市场，应考虑在周边建立**中转分拣中心**。
3.  **针对性营销**：在 SP 等高效物流区可以主打“极速达”心智；而在北部州则应主打“包邮”或“货源丰富”心智。

---
*本项目已完成三大专题分析，建立了从整体漏斗到核心诱因，再到地域分布的完整链路。*
